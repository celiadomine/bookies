<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bookies</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  
  <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %> 
  
  <%= javascript_include_tag "application", "data-turbo-track": "reload" %>
</head>

<body class="bg-pink-50 min-h-screen">

  <div class="p-4 bg-pink-600 shadow-xl sticky top-0 z-10">
    <div class="max-w-6xl mx-auto flex justify-center items-center space-x-12">

      <div class="flex space-x-6 font-bold text-white">

        <% current_page_class = ->(path) { current_page?(path) ? 'bg-pink-800' : 'hover:bg-pink-700' } %>
        <%= link_to "Home", root_path, class: "px-4 py-2 rounded-full transition-colors #{current_page_class.call(root_path)}" %>
        
        <% if current_user %>
          <%= link_to "Profile", profile_path(current_user), class: "px-4 py-2 rounded-full transition-colors #{current_page_class.call(profile_path(current_user))}" %>
          <%= link_to "My Books", books_path, class: "px-4 py-2 rounded-full transition-colors #{current_page_class.call(books_path)}" %>
          
          <% if current_user.admin? %>
            <%= link_to "Admin", admin_users_path, class: "px-4 py-2 rounded-full transition-colors #{current_page_class.call(admin_users_path)}" %>
          <% end %>
        <% end %>
      </div>

      <%= form_with url: books_search_path, method: :get, class: "flex items-center" do |f| %>
        <div class="flex">
          <input type="text" name="query" placeholder="Search for a book..." 
                 class="p-2 rounded-l-full text-black focus:ring-pink-300 focus:border-pink-300 border-none w-64">
          
          <input type="submit" value="Search" 
                 class="bg-pink-700 text-white px-4 py-2 rounded-r-full cursor-pointer hover:bg-pink-800 font-bold transition-colors">
        </div>
      <% end %>
      <div>
        <% if current_user %>
          <%= button_to "Logout", logout_path, data: { turbo_method: :delete }, class: "hover:bg-pink-700 px-4 py-2 rounded-full font-bold" %>
        <% else %>
          <%= link_to "Login", login_path, class: "hover:bg-pink-700 text-white px-4 py-2 rounded-full font-bold" %>
         
          <%= link_to "Sign Up", signup_path, class: "bg-pink-800 text-white hover:bg-pink-900 px-4 py-2 rounded-full font-bold transition-colors ml-2" %>
        <% end %>
      </div>

    </div>
  </div>

  <div class="max-w-6xl mx-auto p-8">
    <% if notice %>
      <div class="p-4 rounded-xl border border-pink-400 bg-pink-100 text-pink-700 mb-4 font-medium" role="alert">
        <%= notice %>
      </div>
    <% end %>
    <% if alert %>
       <div class="p-4 rounded-xl border border-red-400 bg-red-100 text-red-700 mb-4 font-medium" role="alert">
        <%= alert %>
      </div>
    <% end %>

    <%= yield %>
  </div>
</body>
</html>